module.exports = async function (input, info) {
  const svgIcon = '<svg fill="none" height="48" viewBox="0 0 48 48" width="48" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0_788_49395)"><g clip-path="url(#clip1_788_49395)"><path clip-rule="evenodd" d="M38.1647 7.20349C38.6511 7.61045 39.1237 8.04145 39.5809 8.49639C40.0382 8.95134 40.4713 9.42158 40.8804 9.90553C41.4149 10.538 41.3329 11.4818 40.6973 12.0137C40.0616 12.5455 39.1131 12.4639 38.5785 11.8315C38.2251 11.4133 37.8503 11.0064 37.4543 10.6124C37.0582 10.2183 36.6493 9.84546 36.229 9.49377C35.5934 8.96193 35.5114 8.01809 36.0459 7.38565C36.5805 6.7532 37.5291 6.67165 38.1647 7.20349ZM42.7841 15.6045C43.5647 15.3223 44.4273 15.7233 44.7109 16.5C45.151 17.7056 45.4813 18.9417 45.7019 20.1928C45.8455 21.0067 45.2987 21.7823 44.4806 21.9251C43.6626 22.0679 42.8832 21.5238 42.7396 20.7099C42.5491 19.6291 42.2638 18.5619 41.884 17.5216C41.6005 16.7449 42.0035 15.8866 42.7841 15.6045ZM32.437 5.30933C32.1535 6.08602 31.2908 6.48695 30.5102 6.20484C29.4646 5.82696 28.3921 5.54315 27.3058 5.35353C26.4878 5.21074 25.941 4.43518 26.0845 3.62127C26.228 2.80736 27.0075 2.26331 27.8255 2.40611C29.0829 2.6256 30.3252 2.95426 31.537 3.39219C32.3176 3.6743 32.7206 4.53263 32.437 5.30933ZM21.9154 3.62127C22.059 4.43518 21.5122 5.21074 20.6942 5.35353C19.6079 5.54315 18.5353 5.82696 17.4897 6.20484C16.7091 6.48696 15.8465 6.08602 15.5629 5.30933C15.2794 4.53264 15.6823 3.6743 16.463 3.39219C17.6747 2.95426 18.917 2.6256 20.1745 2.40611C20.9925 2.26331 21.7719 2.80736 21.9154 3.62127ZM44.4806 26.0732C45.2987 26.216 45.8455 26.9916 45.7019 27.8055C45.4813 29.0566 45.151 30.2927 44.7109 31.4984C44.4273 32.2751 43.5647 32.676 42.7841 32.3939C42.0035 32.1118 41.6005 31.2534 41.884 30.4768C42.2638 29.4364 42.5491 28.3692 42.7396 27.2884C42.8832 26.4745 43.6626 25.9304 44.4806 26.0732Z" fill="#1D9BE2" fill-rule="evenodd"></path><path clip-rule="evenodd" d="M10.5456 8.49644C11.1328 9.08075 11.1328 10.0281 10.5456 10.6124C3.11496 18.0057 3.11496 29.9927 10.5456 37.386C17.9762 44.7793 30.0236 44.7793 37.4542 37.386C38.0414 36.8017 38.9936 36.8017 39.5808 37.386C40.1681 37.9703 40.1681 38.9177 39.5808 39.502C30.9757 48.0639 17.024 48.0639 8.41892 39.502C-0.186208 30.94 -0.186209 17.0584 8.41892 8.49644C9.00617 7.91213 9.95831 7.91213 10.5456 8.49644Z" fill="#1D9BE2" fill-rule="evenodd"></path><path d="M40.6972 35.9847C41.3329 36.5166 41.4148 37.4604 40.8803 38.0928C40.4713 38.5768 40.0381 39.047 39.5808 39.502C39.1236 39.9569 38.651 40.3879 38.1646 40.7949C37.529 41.3267 36.5804 41.2452 36.0459 40.6127C35.5114 39.9803 35.5933 39.0365 36.229 38.5046C36.6493 38.1529 37.0581 37.7801 37.4542 37.386C37.8502 36.9919 38.225 36.5851 38.5785 36.1669C39.113 35.5344 40.0616 35.4529 40.6972 35.9847Z" fill="#1D9BE2"></path><path d="M11.954 7.38569C12.4885 8.01814 12.4065 8.96197 11.7709 9.49381C11.3506 9.84551 10.9416 10.2184 10.5456 10.6124C10.1495 11.0065 9.77485 11.4133 9.42138 11.8315C8.88686 12.464 7.93826 12.5455 7.30263 12.0137C6.66699 11.4819 6.58503 10.538 7.11955 9.90558C7.52857 9.42163 7.96167 8.95139 8.41892 8.49644C8.87616 8.0415 9.34883 7.6105 9.83522 7.20353C10.4708 6.67169 11.4194 6.75325 11.954 7.38569Z" fill="#1D9BE2"></path><path d="M24 8C15.168 8 8.00003 15.168 8.00003 24C8.00003 32.832 15.168 40 24 40C32.832 40 40 32.832 40 24C40 15.168 32.832 8 24 8ZM24 12.8C26.656 12.8 28.8 14.944 28.8 17.6C28.8 20.256 26.656 22.4 24 22.4C21.344 22.4 19.2 20.256 19.2 17.6C19.2 14.944 21.344 12.8 24 12.8ZM24 35.52C20 35.52 16.464 33.472 14.4 30.368C14.448 27.184 20.8 25.44 24 25.44C27.184 25.44 33.552 27.184 33.6 30.368C31.536 33.472 28 35.52 24 35.52Z" fill="#1D9BE2"></path></g></g><defs><clipPath id="clip0_788_49395"><rect fill="white" height="48" width="48"></rect></clipPath><clipPath id="clip1_788_49395"><rect fill="white" height="56.5686" transform="translate(-4.28427 -4.2843)" width="56.5685"></rect></clipPath></defs></svg>';
  let output = '';
  output += `  
    <div class="offcanvas offcanvas-start" tabindex="-1" id="dxpConsent" aria-labelledby="offcanvasExampleLabel">
      <div class="offcanvas-header">
      ${svgIcon}
        <h5 class="offcanvas-title" id="offcanvasExampleLabel">${input.consentHeading}</h5>
          <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
      </div>
      <div class="offcanvas-body">
        <div>
          ${input.consentContent}
          <div id="consent-buttons">
            <button id="consent-button-give" class="btn btn-success" data-bs-dismiss="offcanvas" aria-label="Give Consent">Give Consent</button>
            <button  id="consent-button-revoke" class="btn btn-danger" data-bs-dismiss="offcanvas" aria-label="Revoke Consent">Revoke Consent</button>
          </div>
        </div>
        <h5 class="mt-5">CDP demonstration segments</h5>
  `;
  input.personaArray.forEach((item, i) => {
    output += `
        <p><button class="btn btn-warning demo-persona" data-persona="${item.personaEventValue}" data-event="${item.personaEventID}">${item.personaName}</button></p>
    `;
  })
  output += `
    <div id="response">...</div>

    </div>
    </div>

    <div class="consent-wrapper">
    <button class="btn btn-light" type="button" data-bs-toggle="offcanvas" data-bs-target="#dxpConsent" aria-controls="dxpConsent">
    <i class="bi bi-sliders2-vertical"></i>
    </button>
    </div>
  `;

  return output;
};